### 트랜잭션
- 작업의 논리적 단위 (여러 개의 SQL문들이 하나의 트랜잭션으로 간주됨)
- 작업의 완전성을 보장하기 위해 사용 (완전히 수행되거나 하나도 수행되지 않거나 -> atomic)
- 트랜잭션을 통해 많은 사용자들이 동시에 데이터베이스에 접근하여 사용할 수 있음
- 트랜잭션의 범위를 최소화하는 것이 좋음
  - 데이터베이스의 커넥션 수가 제한적 -> 각 트랜잭션에서 커넥션 소유 시간이 길어진다면 커넥션을 기다리는 상황이 발생할 수 있음

### 트랜잭션 VS Lock
- 트랜잭션 : 작업의 완전성을 보장하기 위해 사용 (하나의 논리적 작업은 완전히 수행되거나 하나도 수행되지 않거나를 보장하기 위함)
- Lock : 동시성 제어를 위해 사용 (여러 커넥션이 동시에 동일한 자원을 요청할 경우 순서대로 한 시점에는 하나의 커넥션만 변경할 수 있도록)
  - 단점) lock으로 인한 데드락 발생 가능 -> 여러 트랜잭션들이 실행하지 못하고 서로 무한정 기다림
  
### 트랜잭션의 특성 (ACID)
- 트랜잭션은 ACID라는 특성을 만족해야함
- Atomicity (원자성)
  - 트랜잭션 내의 모든 연산들이 완전히 수행되거나 전혀 수행되지 않음
  - 부분적으로 갱신한 트랜잭션의 영향은 취소(undo) / 완료된 트랜잭션이 갱신한 사항은 재수행(redo)함으로써 원자성을 보장
- Consistency (일관성)
  - 트랜잭션이 수행되기 전에 데이터베이스가 일관된 상태를 가졌다면 수행 후에도 일관된 상태를 가짐
  - 트랜잭션 수행도중에는 데이터베이스가 일시적으로 일관된 상태를 가질 수 있음
- Isolation (고립성)
  - 한 트랜잭션이 데이터를 갱신하는 동안 갱신 중인 데이터를 다른 트랜잭션이 접근하지 못함
  - DBMS는 응용 프로그램들의 요구사항에 따라 다양한 고립 수준(isolation level)을 제공
  - isolation level이 낮을수록 concurrent하게 수행될 수 있는 트랜잭션의 수가 많아짐
- Durability (지속성)
  - 트랜잭션이 성공적으로 완료되었다면 데이터베이스에 결과가 영구적으로 반영됨
 
### 트랜잭션의 연산
- commit : 트랜잭션 작업이 성공적으로 완료됨
  - 데이터베이스는 새로운 일관된 상태를 가짐 (Consistency) + 트랜잭션이 수행한 결과는 데이터베이스 영구적으로 반영 (Durability)
- rollback : 트랜잭션의 일부를 성공적으로 끝내지 못하여 일부 반영된 갱신을 취소(undo)함 
  - 해당 연산을 통해 트랜잭션 내의 일부 연산이 실패하면 모든 연산이 전혀 수행되지 않음 (Atomicity)
  
### 트랜잭션의 상태
<img src="https://user-images.githubusercontent.com/49056225/116056198-790cb000-a6b8-11eb-9330-bcafdc774009.png" width="500" height="300"><br>
- Active : 트랜잭션이 실행 중이며 동작 중인 상태
- Failed : 트랜잭션이 더이상 정상적으로 진행할 수 없는 상태
- partially commited : 트랜잭션의 sql문들이 모두 실행되고 commit 명령만 남은 상태
- commited : 트랜잭션이 정상적으로 완료된 상태 (commit 명령까지 수행 완료)
- Aborted : 트랜잭션이 취소되고 실행 이전 데이터로 돌아간 상태
